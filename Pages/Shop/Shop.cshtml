@page
@model Libro_Store.Pages.Shop.ShopModel
@{
}


<header>
    <div class="row pt-4">
        <div class="text-center">
            <h1>Books</h1>
        </div>
    </div>
    <div class="row pt-4">
            <div class="col-8">
               <h2>Search our selection of books with something for everyone!</h2>

            </div>
            <div class= "col-4">
            <a asp-page="/Create/Create" class="btn btn-primary">
                Donate a book!
            </a>
            </div>
            
     </div>
     <div class="row pt-4">
            <div class="col-4">
                    <form method="post">
                        <div>Search <input asp-for="Search" /></div>
                        <button type="submit" asp-page-handler="Search">Submit</button>
                    </form>
            </div>
     </div>


        
@*Table that holds all items from db
*@    
</header>

<div>
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>
                    Image
                </th>
                <th>
                    Title
                </th>
                <th>
                    Author
                </th>
                <th>
                    Price
                </th>
                <th>
                    Description
                </th>
                
            </tr>
        </thead>

        <tbody>
            @foreach(var obj in Model.Books)
            {
        
            <tr>
                
                    @{
                        try
                        {
                            <td width="20%">
                            <img src="@string.Format("data:image/jpg;base64,{0}", Convert.ToBase64String(obj.ImageData))" alt="Image" width ="100" height="100"/>
                            </td>
                        }
                        catch
                        {
                            <td width="20%">
                            <img src="/Images/Empty.jpg" alt="No Image Submitted" width ="100" height="100"/>
                            </td>
                        }
                    }
                <td width="20%">@obj.Title</td>
                <td width="20%">@obj.Author</td>
                <td width="20%">@obj.Price</td>
                <td width="20%">@obj.Description</td>
            </tr>
            }

        </tbody>

    </table>


</div>